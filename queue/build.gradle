apply plugin: "java"
apply plugin: "application"

sourceCompatibility = 1.7
targetCompatibility = 1.7
version = "1.0"

ext {
    jbossHome = "/opt/jboss-eap-5.2.0/jboss-as"
    deployDir = jbossHome + "/server/default/deploy"
    queueFile = "sample-jbm-queue-service.xml"
}

repositories {
    mavenCentral()
    maven { url "https://repository.jboss.org/nexus/content/groups/public-jboss/" }
}

dependencies {
    compile "org.jboss.spec.javax.jms:jboss-jms-api_1.1_spec:1.0.1.Final"
    runtime files("${jbossHome}/client/jbossall-client.jar")
    // utilities
    compile "com.google.guava:guava:15.0"
    // logging
    compile "org.slf4j:slf4j-api:1.5.5"
    // test
    testCompile "junit:junit:4.11"
    testCompile "org.hamcrest:hamcrest-library:1.3"
}

task deploy(type: Copy) {
    from("src/main/resources") { include queueFile }
    into deployDir
}

task undeploy(type: Delete) { delete "${deployDir}/${queueFile}" }

mainClassName = "com.redhat.samples.messaging.ProducerConsumer"
